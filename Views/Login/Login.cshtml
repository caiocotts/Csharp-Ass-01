@{
    ViewData["Title"] = "Login";
}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, intial-scale=1.0">
    <title> ViewData["Title"] </title>
    

    <link rel="stylesheet" href="/css/Login.css">
    
</head>




<div class="below-nav">
    
    <div class="glass-container">
        <h1 id="formTitle">LOGIN</h1>
        @if (TempData["ErrorMessage"] != null)
        {
            <div class="alert alert-danger" style="padding-top: 2px;">@TempData["ErrorMessage"]</div>
            
        }
        <div class="login-box">
            
            @*  start off at login page *@
            <form id="loginForm" method="post" asp-controller="Login" asp-action="LoginToSession">
                <input type="text" id="emailAddress" name="emailAddress" required placeholder="Email Address">@*change type to email if we do in the DB*@
                <input type="text" id="username" name="username" placeholder="Username" style="display:none;">
                <button type="submit">login</button>
            </form>

            <button id="signUpBtn">
                dont have an account? sign up!
            </button>
        </div>
    </div>
    
</div>



<script>
    // Elements
    const signUpBtn = document.getElementById('signUpBtn');
    const loginForm = document.getElementById('loginForm');
    const usernameInput = document.getElementById('username');
    const submitBtn = loginForm.querySelector('button[type="submit"]');
    const formTitle = document.getElementById('formTitle');

    // Optional: add a "Back to Login" button
    let loginBtn = document.getElementById('loginBtn');
    if (!loginBtn) {
        loginBtn = document.createElement('button');
        loginBtn.type = "button";
        loginBtn.id = "loginBtn";
        loginBtn.textContent = "Back to Login";
        loginBtn.style.display = "none";
        signUpBtn.parentNode.appendChild(loginBtn);
        
    }

    // Show Create Account form
    function createAccount() {
        formTitle.textContent = "Sign Up"; 
        usernameInput.style.display = 'block';                   // show username
        usernameInput.required = true;   
        submitBtn.textContent = "Create Account";                // change submit text
        loginForm.setAttribute('action', '/Login/CreateUser');   // change form action
        signUpBtn.style.display = 'none';                        // hide sign up button
        loginBtn.style.display = 'inline-block';                // show back to login button
    }


    function loginToAccount() {
        formTitle.textContent = "Login";
        usernameInput.style.display = 'none';                    // hide username
        usernameInput.required = false;         //for making it so its no required while hidden
        submitBtn.textContent = "Login";                         // reset submit text
        loginForm.setAttribute('action', '/Login/LoginToSession');        // reset form action
        signUpBtn.style.display = 'inline-block';               // show sign up button
        loginBtn.style.display = 'none';                        // hide back button
    }

    // Event listeners
    signUpBtn.addEventListener('click', createAccount);
    loginBtn.addEventListener('click', loginToAccount);

    const alertBox = document.querySelector('.alert-danger');
    if (alertBox) {
        setTimeout(() => {
            alertBox.style.opacity = '0';           // fade out
            setTimeout(() => alertBox.remove(), 200); // remove from DOM after fade
        }, 2000); // wait 2 seconds before fading
    }
</script>
